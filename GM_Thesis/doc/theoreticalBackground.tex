 \chapter{Theoretical Background} \label{chap:theorBack}

The present chapter contains the background knowledge required throughout the length of this thesis. Section~\ref{sec:theorBack-GM} describes the framework of the \emph{Geometric Monitoring method}. Section~\ref{sec:theorBack-MOP} presents \emph{multi-objective optimization} and  dives into the algorithms used in our implementation. Section \ref{sec:theorBack-MWMGraphs} discusses \emph{graph maximum weight matching}, and, finally, in Section~\ref{sec:theorBack-SavitzkyGolay} we explain the \emph{Savitzky-Golay filtering} used for smoothing, velocity and acceleration approximation.

%TODO gaussian process and lwpr?

\section{Geometric Monitoring of Distributed Streams} \label{sec:theorBack-GM}
 
The \emph{Geometric Monitoring} method~\cite{Sharfman2006GM} was devised as a way to monitor threshold crossings of arbitrary functions over distributed data streams, i.e. be able to determine whether an arbitrary \emph{monitoring function} $f(\cdot)$ over the data streams violated a predetermined threshold ($f(\cdot)>T$ or $f(\cdot)<T$). By mapping data streams to a feature space defined by the dimensionality of each data stream update and monitoring the convex hull surrounding the value of the monitoring function, Sharfman et al. were able to decompose the monitoring task into local constraints and apply distributed threshold monitoring, while reducing the communication costs required by central data processing.

In the current section a detailed presentation of this method is taking place. In Subsection~\ref{subsec:theorBack-GM-sysArch} two system architectures are shown, a decentralized scenario and a centralized one, where Geometric Monitoring can be applied. Subsection~\ref{subsec:theorBack-GM-compMod} explains the computational model, followed by the method's geometric interpretation in Subsection~\ref{subsec:theorBack-GM-geomInt}. Finally, in Subsection~\ref{subsec:theorBack-GM-protocol} the protocol implementing the Geometric Monitoring method is described.


\subsection{System Architecture} \label{subsec:theorBack-GM-sysArch}

In~\cite{Sharfman2006GM} two different scenarios of Geometric Monitoring corresponding to different network topologies are examined. The \emph{decentralized scenario} refers to a topology where nodes are allowed to communicate with each other and a central node is absent. The \emph{centralized scenario} models a star network topology, where a coordinator node communicating with all other nodes is existent.

\subsubsection{Decentralized scenario} \label{subsubsec:theorBack-GM-decentralized}

The topology examined is that of a partially or fully connected mesh network where a coordinator node is absent and nodes are allowed to broadcast to the network or communicate with each other according to the links existent between them. Data stream update vectors arrive continuously at each of the monitoring nodes and nodes must always be synchronized, i.e. all nodes must be aware of the monitoring task's state at all times. An example is depicted in Figure~\ref{fig:decentralized}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% decentralized figure %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[H]
\centering
\includegraphics{img/decentralized.tex}
\caption{Network topology example of the decentralized scenario. Dashed lines represent data streams and half arrows represent message exchanges.} 
\label{fig:decentralized}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsubsection{Centralized scenario}

The \emph{centralized}, or \emph{coordinator-based} scenario is built upon a star network topology, where all monitoring nodes communicate with a central node, the \emph{coordinator node}. Nodes receive data stream update vectors continuously, and must communicate their state information to the coordinator node when needed. The coordinator receives data stream updates as well, which can be modelled by an additional monitoring node responsible for the cooridinator node's data stream. Communication between monitoring nodes is not allowed, thus, only the communicator can, and must, be aware of the state of the monitoring task at all times. An example is depicted in Figure~\ref{fig:centralized}.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% centralized figure %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}[H]
\centering
\includegraphics{img/centralized.tex}
\caption{Network topology example of the centralized scenario.The bold node represents the coordinator node. Dashed lines represent data streams and half arrows represent message exchanges.} 
\label{fig:centralized}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Computational Model} \label{subsec:theorBack-GM-compMod}

The main goal of the Geometric Monitoring method is to efficiently detect threshold crossings of an arbitrary function over distributed data streams. This is realized via vector projections of the data streams and convex local constraint assignments regarding said vectors at the nodes.

Let $f:\mathbb{R}^d \to \mathbb{R}$ be an arbitrary function, the \emph{monitoring function}, whose value over the data streams needs to be monitored, so that if $f(\cdot)>T$ or $f(\cdot)<T$ an alarm is raised. For linear functions this problem is trivial, so that by letting, for example, $x_1$ and $x_2$ be data stream values at different nodes and requiring $f(\frac{x_1+x_2}{2})>10$ to be monitored, it holds that $f(\frac{x_1+x_2}{2})=\frac{f(x_1)+f(x_2)}{2}$, and the problem can be decomposed to local constraints $f(x_i)<10, i=1,2$ at both nodes, i.e. a node remains silent until it violates its local constraint. Consider now the case of a non-linear function. By knowing the value of the function at the nodes nothing can be deduced about the function's value over the average of the monitoring streams and where it is positioned with respect to the threshold. Let $f(x)=10x-x^2$, $x_1=0$ and $x_2=9$. Even thought $f(x_1)=0<10$ and $f(x_2)=9<10$, their average violates the specified threshold, $f(\frac{x_1+x_2}{2})=f(4.5)=24.75>10$. 

In order to be able to effectively track non-linear functions, in the likes of the aforementioned example, a mapping of the streams to a vector space is taking place. Let $P=\{p_1, ..., p_n\}$ be the monitoring node set with weights $w_1, ..., w_n$, which can be either static or time varying. Their respective data streams $S=\{s_1, ..., s_n\}$ are represented by $\vec{v_1}(t), ..., \vec{v_n}(t)$, the $d$-dimensional \emph{local statistics vectors} of the nodes at time $t$. The \emph{global statistics vector} at time $t$ is the weighted average of the local statistics vectors, as such:
\begin{equation}
\vec{v}(t)=\frac{\sum_{i=1}^n{w_i\vec{v_i}(t)}}{\sum_{i=1}^n{w_i}}
\label{form:globalStatsVector}
\end{equation}

Infrequent communication between monitoring nodes, in the decentralized scenario, or between monitoring nodes and the coordinator, in the coordinator-based scheme, dictates the need to keep track of the value of the global statistics vector at the time the last global communication occurred, thus forming the \emph{estimate vector}:
\begin{equation}
\vec{e}(t)=\frac{\sum_{i=1}^n {w_i \vec{v_i}'}}{\sum_{i=1}^n {w_i}}
\label{form:estimateVector}
\end{equation}
,where $\vec{v_i}'$ is the last communicated statistics vector of node $p_i$.

At the monitoring nodes the difference between the current local statistics vector and the last communicated statistics vector is denoted by $\Delta \vec{v_i}(t)=\vec{v_i}(t)-\vec{v_i}', i=1,...,n$. The \emph{drift vector} $\vec{u_i}(t), i=1,...,n$, also maintained at the monitoring nodes, represents the deviation of each node's data stream from the global statistics vector and is defined differently in the two scenarios:
\begin{itemize}
\item In the \textbf{decentralized} setting the drift vector is regarded as the displacement of the local statistics vector from the estimate vector:
\begin{equation}
\vec{u_i}(t)=\vec{e}(t)+\Delta \vec{v_i}(t)
\label{form:decentralizedDrift}
\end{equation}
\item In the \textbf{centralized} setting the monitoring nodes forward their state to the coordinator node, who has a global overview of the monitoring task at hand. This property allows the coordinator to counteract the effects a specific stream has on the partially observed monitoring task with an other, ``opposite'', stream belonging to a different monitoring node. This is taken care by the \emph{balancing process} initiated every time a local violation occurs, which is responsible for computing and communicating the \emph{slack vector} $\vec{\delta_i}$ to the nodes that contributed to the process, thus providing them with the necessary disposition of their drift vectors, as follows:
\begin{equation}
\vec{u_i}(t)=\vec{e}(t)+\Delta \vec{v_i}(t)+\frac{\vec{\delta_i}}{w_i}
\label{form:centralizedDrift}
\end{equation} 
\end{itemize}

\subsubsection{Balancing process} \label{subsubsec:theorBack-GM-balancingProc}

\subsection{Geometric Interpretation} \label{subsec:theorBack-GM-geomInt}

node local constraints make sure global violation is accurately monitored\\
how?

convexity property of drift vectors

theorem of bounded convex hull by local constraints (balls)

monochromaticity of balls

balls monochromatic means threshold upheld


\subsection{Protocol} \label{subsec:theorBack-GM-protocol}

decentralized algorithm (in short, for completeness)

centralized algorithm (in detail)\\
*we will focus on that


\section{Multiobjective Optimization} \label{sec:theorBack-MOP}

what is mop\\
use examples\\
kinds:\\
	a.numerical\\
	b.evolutionary
\subsection{SLSQP} \label{subsec:theorBack-SLSQP}

\subsection{Sohr's algorithm a.k.a. ralg} \label{subsec:theorBack-CONMIN}

algorithm description

\section{Savitzky-Golay Filtering} \label{sec:theorBack-SavitzkyGolay}

filtering generals\\
examples of uses of filters\\
filters:\\
	Kalman\\
		+,-
	Moving Average\\
		+,-
	Savitzky-Golay a.k.a. ???
		+,-

algorithm description

\section{Maximum Weight Matching in Graphs} \label{sec:theorBack-MWMGraphs}

general graph theory (introductory)

what is max weight matching

algorithm description
